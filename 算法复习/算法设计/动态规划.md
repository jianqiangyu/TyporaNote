# 动态规划

动态规划通常用来解决最优化问题。

> 这类问题有很多可行解，每个解都有一个值，我们希望希望寻找最优解（最小值或最大值）的解。我们称这样的解为问题的一个最优解，而不是最优解，因为问题可能有多个解都能达到最优值

通常按照4个步骤来设计一个动态规划算法

1. 刻画一个最优解的结构特征
2. 递归的定义最优解的值。
3. 计算最优解的值，通常采用自底向上的方法。
4. 利用计算出的信息构造一个最优解

> 步骤1~3是动态规划求解问题的基础。如果我们仅仅需要一个最优解，而非解本身，可以忽略步骤4。如果确实要做步骤4，有时就需要在执行步骤3的过程中维护一些额外信息，以便构造出一个最优解

### 动态规划实现

动态规划有两种等价的实现方法：

1. 带备忘的自顶向下法
2. 自底向上法

## 动态规划原理

适合应用动态规划方法求解的最优化问题应该具备的两个要素：最优子结构和子问题重叠。

### 最优子结构

用动态规划方法求解最优化问题的第一步就是刻画最优解的结构。

> 最优子结构：问题的最优解由相关的子问题的最优解组合而成，而这些子问题可以独立求解，彼此之间是无关的。子问题无关的含义是，同一个原问题的一个子问题的解不影响另一个子问题的解。

发掘最优子结构性质的过程中，遵循了如下的通用模式：

1. 证明问题最优解的第一个组成部分是做出一个选择，做出这次选择，会产生一个或多个待解决的子问题；

2. 对于一个给定问题，在其可能的第一步选择中，你假定已经知道哪种选择才能得到最优解；

3. 给定可获得最优解的选择后，你确定这次选择会产生哪些子问题，以及如何最好的刻画子问题空间；

   > 一个刻画子问题空间的好经验是：保持子问题空间尽可能简单，只在必要时才扩展它。（钢条切割问题）

4. 利用 剪贴法 证明：作为构成原问题最优解的组成部分，每个子问题的解就是它本身的最优解 （无权最短路径和无权最长路径）

### 子问题重叠

适合动态规划求解的最优化问题应具备的第二个性质是子问题空间必须足够“小”，即问题的递归算法会反复的求解相同的子问题，而不是一直生成新的子问题。

> 如果递归算法反复求解相同的子问题，我们就称最优化问题具有重叠子问题

> 与之相对的，适合用分治方法求解的问题通常在递归的每一步都生成全新的子问题

动态规划通常这样利用重叠子问题性质：对每个子问题求解一次，将解存入一个表中，当再次需要这个子问题时直接查表，每次查表的代价为常量时间

### 重构最优解

> 通常将每个子问题所做的选择存在一个表中，这样就不必根据代价值来重构这些信息。

### 备忘

> 带备忘的递归算法为每个子问题维护一个表项来保存它的解。每个表项的初始值设定为一个特殊值，表示尚未填入问题的解。当递归调用过程中第一次遇到子问题时，计算其解，并存入对应表项目。随后每次遇到相同子问题时，只是简答的查表，然后返回其解。

例题：

##钢条切割问题

1. 钢条切割问题：给定一个长度为n英寸的钢条和一个价格表p<sub>2</sub>(i=1,2,3,...,n),求切割钢条的方案，使得销售收益r<sub>n</sub>最大，如果长度为n英寸的钢条的价格p<sub>n</sub>足够大，可能就不需要切割。

### 刻画最优解的结构特征

P<sub>n</sub>

